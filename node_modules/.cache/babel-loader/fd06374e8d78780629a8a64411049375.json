{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jalenjohnson/Desktop/ReactPortfolio/fitness-tracker/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jalenjohnson/Desktop/ReactPortfolio/fitness-tracker/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jalenjohnson/Desktop/ReactPortfolio/fitness-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{useNavigate}from'react-router-dom';import jwt_decode,{JwtPayload}from'jwt-decode';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();export default AuthContext;export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),authTokens=_useState2[0],setAuthTokens=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var loginUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch('http://127.0.0.1:8000/api/token/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({'email':e.target.email.value,'password':e.target.password.value})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(response.status===200){setAuthTokens(data);setUser(jwt_decode(data.access));navigate('/summary');}else{alert('Something went wrong!');}case 8:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref2.apply(this,arguments);};}();var contextData={user:user,loginUser:loginUser};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:contextData,children:children});};","map":{"version":3,"names":["createContext","useState","useNavigate","jwt_decode","JwtPayload","AuthContext","AuthProvider","children","navigate","authTokens","setAuthTokens","user","setUser","loginUser","e","preventDefault","fetch","method","headers","body","JSON","stringify","target","email","value","password","response","json","data","status","access","alert","contextData"],"sources":["/Users/jalenjohnson/Desktop/ReactPortfolio/fitness-tracker/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\nimport { useNavigate } from 'react-router-dom'\nimport jwt_decode, { JwtPayload } from 'jwt-decode'\n\nconst AuthContext = createContext()\n\nexport default AuthContext\n\nexport const AuthProvider = ({ children }) => {\n    const navigate = useNavigate()\n    const [authTokens, setAuthTokens] = useState(null)\n    const [user, setUser] = useState(null)\n\n    const loginUser = async (e) => {\n        e.preventDefault()\n        const response = await fetch('http://127.0.0.1:8000/api/token/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ 'email': e.target.email.value, 'password': e.target.password.value })\n        })\n\n        const data = await response.json()\n\n        if (response.status === 200) {\n            setAuthTokens(data)\n            setUser(jwt_decode(data.access))\n            navigate('/summary')\n        } else {\n            alert('Something went wrong!')\n        }\n\n\n    }\n\n    let contextData = {\n        user: user,\n        loginUser: loginUser\n    }\n\n    return (\n        <AuthContext.Provider value={contextData}>\n            {children}\n        </AuthContext.Provider>\n    )\n}"],"mappings":"gcAAA,OAASA,aAAT,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,WAAP,EAAqBC,UAArB,KAAuC,YAAvC,C,2CAEA,GAAMC,YAAW,cAAGL,aAAa,EAAjC,CAEA,cAAeK,YAAf,CAEA,MAAO,IAAMC,aAAY,CAAG,QAAfA,aAAe,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC1C,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,cAAoCD,QAAQ,CAAC,IAAD,CAA5C,wCAAOQ,UAAP,eAAmBC,aAAnB,eACA,eAAwBT,QAAQ,CAAC,IAAD,CAAhC,yCAAOU,IAAP,eAAaC,OAAb,eAEA,GAAMC,UAAS,6FAAG,iBAAOC,CAAP,sIACdA,CAAC,CAACC,cAAF,GADc,sBAESC,MAAK,CAAC,kCAAD,CAAqC,CAC7DC,MAAM,CAAE,MADqD,CAE7DC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFoD,CAK7DC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAE,QAASP,CAAC,CAACQ,MAAF,CAASC,KAAT,CAAeC,KAA1B,CAAiC,WAAYV,CAAC,CAACQ,MAAF,CAASG,QAAT,CAAkBD,KAA/D,CAAf,CALuD,CAArC,CAFd,QAERE,QAFQ,qCAUKA,SAAQ,CAACC,IAAT,EAVL,QAURC,IAVQ,eAYd,GAAIF,QAAQ,CAACG,MAAT,GAAoB,GAAxB,CAA6B,CACzBnB,aAAa,CAACkB,IAAD,CAAb,CACAhB,OAAO,CAACT,UAAU,CAACyB,IAAI,CAACE,MAAN,CAAX,CAAP,CACAtB,QAAQ,CAAC,UAAD,CAAR,CACH,CAJD,IAIO,CACHuB,KAAK,CAAC,uBAAD,CAAL,CACH,CAlBa,sDAAH,kBAATlB,UAAS,6CAAf,CAuBA,GAAImB,YAAW,CAAG,CACdrB,IAAI,CAAEA,IADQ,CAEdE,SAAS,CAAEA,SAFG,CAAlB,CAKA,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAEmB,WAA7B,UACKzB,QADL,EADJ,CAKH,CAtCM"},"metadata":{},"sourceType":"module"}